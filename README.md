# WebCenterJS

A *Framework independent* javascript library that makes working with Oracle WebCenter (11g & 12c) REST API a breeze.**It cannot get any simpler than this**

Library encapsulates all the logic necessary for 
* Authentication using
	* Basic Auth
	* OIT Trust token generated by [WCSecurityUtility](https://docs.oracle.com/cd/E29542_01/apirefs.1111/e15995/oracle/webcenter/security/common/WCSecurityUtility.html)
	* SSO
* Parse [Link Model](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#ABCDE106)
* [Discussions](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#GUID-B5A28C7C-A14B-4639-B489-64020FC101C7)
* [Lists](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#GUID-1EDC61FB-428A-4BB2-9E82-A4CD15EB2267)
* [People Connections](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#GUID-2D09972A-1C62-4B21-83EC-C2A1C5C90CCD)
* [Content Management (CMIS)](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#GUID-38D39B1B-EDBB-48A5-B336-062160E0FCD9)
* [Events](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#GUID-6ADBA186-1072-43BC-A350-A5EF5F5F7B03)
* [Feedback](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#GUID-1EDC61FB-428A-4BB2-9E82-A4CD15EB2267)
* [Navigation](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#GUID-4E5DA146-EFA8-4AF0-A6FC-3B97E3012A1D)
* Activity Stream
* Message Boards

Works with framework of your choice. KnockoutJS, Angular, React, React Native, NodeJS, jQuery just to name a few.

## Features
* Built with TypeScript.
* Distributed as NPM & Bower packages.
* CommonJS & Bundled distributions.
* Full Intellisense in Visual Code, WebStorm , Sublime Text etc.
* Type Definitions.
* Automatically handles utoken & Link Model parsing.
* Promise based.

## Installation

### NPM
CommonJS distribution that integrates well with Modern frameworks like Angular, React, Aurelia, VueJS, etc.

```bash
> npm install webcenterjs --save
```

### Bower
Bundled distribution that integrates well with jQuery, KnockoutJS or plain old javascript. 
```bash
> bower install webcenterjs --save
```

## Usage

### TypeScript / ES6
Install webcenterjs NPM module as shown above and use the following snippet.
```javascript
// import module
import WebCenter from "webcenterjs";
import {WallMessageItem} from "webcenterjs"; // Required only for TypeScript, for type definitions.

/**
* Assuming Oracle WebCeter Installation is available at 
* http(s)://wc-host-name:8888/. The following context roots will be available
* OOTB
* 
* WebCenter : http(s)://wc-host-name:8888/webcenter
* Content : http(s)://wc-host-name:16200/cs
* REST API : http(s)://wc-host-name:8888/rest
*/

/**
* Set REST Base URL. 
* Automatically defaults to [window.location.protocol, "//", window.location.host, "/rest"].join("") when running on browser. 
* 
* Defaults to "/rest" when running on NodeJS, React Native.
* 
* It is recommended to set the REST Base URL
*/
WebCenter.Config.setRestBaseUrl("http(s)://wc-host-name:8888/rest");

/**OPTIONAL : Optionally set WC & CS Base URLs as shown below
* The WC & CS URLs will come into play only for Basic Authentication and not for SSO or OIT.
*/
WebCenter.Config.setWcBaseUrl("http(s)://wc-host-name:8888/webcenter");
WebCenter.Config.setCsBaseUrl("http(s)://wc-host-name:16200/cs");

/**OPTIONAL : Optionally set Usename & Password
* 1. When username & password are provided, Basic Authentication is used.
* 2. WebCenter.Auth.setOIT("<OIT_TOKEN>") can be used to work with OIT token. 
* 3. When neither is provided, SSO is assumed.
*/
WebCenter.Auth.setUserName(username);
WebCenter.Auth.setPassword(password);


WebCenter.Wall.postMessage("Awesome Message from WebcenterJS !!!!").then((messageItem: WallMessageItem) => {
	console.log("------ Congrats on your Post ---------", messageItem.id);
}, (error: any) => {
	console.error(error);
});
```
In the above example, when *postMessage* is done, the following happens 
1. GET request to http(s)://wc-host-name:8888/rest/resourceIndex with Basic Auth.
2. Extract uToken.
3. Parse Link Model.
4. *postMessage* using the uToken

Explicit login can be performed using the following snippet, if needed
```javascript
WebCenter.Auth.login().then((resourceIndex: ResourceIndex) => {
	console.log(resourceIndex);
	// ... Do something elese
	// for ex.
	
	/**
	WebCenter.Wall.postMessage("Awesome Message from WebcenterJS !!!!").then((messageItem: WallMessageItem) => {
		console.log("------ Congrats on your Post ---------", messageItem.id);
	}, (error: any) => {
		console.error(error);
	});
	*/

},(error:Error) => {
	console.error(error);
});
```

### ES5 (Plain Old JavaScript in Browser)

```html
<script src="bower_components/webcenterjs/dist/lib/webcenter.bundle.min.js"></script>
```
With the above script a global object **WebCenter** is registered on the window.
```javascript
/**
* Assuming Oracle WebCeter Installation is available at 
* http(s)://wc-host-name:8888/. The following context roots will be available
* OOTB
* 
* WebCenter : http(s)://wc-host-name:8888/webcenter
* Content : http(s)://wc-host-name:16200/cs
* REST API : http(s)://wc-host-name:8888/rest
*/

/**
* Set REST Base URL. 
* Automatically defaults to [window.location.protocol, "//", window.location.host, "/rest"].join("") when running on browser. 
* 
* Defaults to "/rest" when running on NodeJS, React Native.
* 
* It is recommended to set the REST Base URL
*/
WebCenter.Config.setRestBaseUrl("http(s)://wc-host-name:8888/rest");

/**OPTIONAL : Optionally set WC & CS Base URLs as shown below
* The WC & CS URLs will come into play only for Basic Authentication and not for SSO or OIT.
*/
WebCenter.Config.setWcBaseUrl("http(s)://wc-host-name:8888/webcenter");
WebCenter.Config.setCsBaseUrl("http(s)://wc-host-name:16200/cs");

/**OPTIONAL : Optionally set Usename & Password
* 1. When username & password are provided, Basic Authentication is used.
* 2. WebCenter.Auth.setOIT("<OIT_TOKEN>") can be used to work with OIT token. 
* 3. When neither is provided, SSO is assumed.
*/
WebCenter.Auth.setUserName(username);
WebCenter.Auth.setPassword(password);

WebCenter.Wall.postMessage("Awesome Message from WebcenterJS !!!!").then(function(messageItem){
	console.log("------ Congrats on your Post ---------", messageItem.id);
}, function(error){
	console.error(error);
});
```
Explicit login can be performed using the following snippet, if needed

```javascript
WebCenter.Auth.login().then(function(resourceIndex){
	console.log(resourceIndex);
	// ... Do something elese
	// for ex.
	
	/**
	WebCenter.Wall.postMessage("Awesome Message from WebcenterJS !!!!").then(function(messageItem){
		console.log("------ Congrats on your Post ---------", messageItem.id);
	}, function(error) => {
		console.error(error);
	});
	*/

},function(error){
	console.error(error);
});
```


## Prerequisites
Make sure Oracle WebCenter Portal is configured as per instructions at [Configuring REST APIs](https://docs.oracle.com/middleware/1221/core/WCEDG/GUID-E2541FFF-3BE7-4A78-B632-366BAE93787A.htm#GUID-0F4492F1-3279-41B2-B38C-5F2A5B63575F)

## Link Model (HATEOAS)
Oracle WebCenter REST API responses confirm to [HATEOAS Standard](http://docs.oracle.com/middleware/12212/wcp/develop/GUID-1A218CB7-743A-4E74-A4E9-921F4DD09F3C.htm#GUID-04B7BCD3-FC27-4E38-B7E8-2781620693EB__GUID-61700E56-6DDE-40C0-8AD9-840D32EEE607). 

WebCenterJS automatically parses the link model and enriches the response as shown below
![Chrome Console](https://github.com/rakeshgajula/webcenterjs/blob/master/linkmodelparse.png?raw=true)

In the above screenshot, note that the response *wcResIdx* is enriched and contains several methods that can be called direclty (*getInvitations* in this case).